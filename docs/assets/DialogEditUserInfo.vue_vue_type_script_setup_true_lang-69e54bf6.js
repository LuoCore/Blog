import{d as h,X as A,W as M,r as p,o as f,m as D,w as r,g as o,P as O,j,a as L,F as P,a8 as W,Q as n,B as z,C as G,T as J,Z as K,S as Q,$ as R,I as X,a0 as Z,aa as H,J as Y,K as x,a4 as ee}from"./index-34f7f365.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{j as ae,k as le}from"./basic-e3059ae2.js";const me=h({__name:"DialogEditUserInfo",props:{visible:{type:Boolean},formData:{}},emits:["done","update:visible"],setup(w,{emit:_}){const u=w;A(()=>{console.log(`count is now: ${u.visible}`),u.visible&&U()});function U(){N(),u.formData.userId&&u.formData.userId>0?m.value=!0:m.value=!1}const b=M({get(){return u.visible},set(e){c("update:visible",e)}}),c=_,d=p(),m=p(!1),k=p({userName:[{type:"string",required:!0,message:"账号不能为空"},{asyncValidator:async(e,a)=>{if(!a)return Promise.resolve()}}],warehouseId:{type:"number",required:!0,message:"请选择仓库",validator(e,a,t,s,v){a<=0&&t(new Error("请选择仓库"))}},email:{type:"email"}}),y=p([]);async function N(){const e=await ae();if(!e||!e.isSuccess){n.msg((e==null?void 0:e.message)||"获取角色失败",{icon:2});return}e.responseData&&(y.value=e.responseData.map(a=>({label:a.roleName,value:a.roleId})))}function V(){var e;d.value.reset(),(e=d.value)==null||e.clearValidate(),b.value=!1}async function I(e,a){try{const t=await le(e);if(!t||!t.isSuccess){n.confirm(t.message||"编辑用户信息失败",{icon:2});return}n.msg(t.message||"操作成功",{icon:1}),c("done"),V()}catch(t){n.msg(t.message,{icon:2})}finally{n.close(a)}}function q(){d.value.validate((e,a,t)=>{e&&n.msg("正在提交数据...",{icon:16,time:0,shade:!0,success:async s=>{await I(a,s)}})})}return(e,a)=>{const t=z,s=G,v=J,B=K,C=Q,S=R,g=X,i=Z,E=H,T=Y,F=x,$=ee;return f(),D($,{modelValue:b.value,"onUpdate:modelValue":a[12]||(a[12]=l=>b.value=l),area:"800px",title:m.value?"编辑":"新增","shade-close":!1,move:!0,maxmin:!0,btn:[{text:"提交",callback:()=>q()},{text:"关闭",callback:()=>V()}],onClose:V},{default:r(()=>[o(F,{ref_key:"refForm",ref:d,model:e.formData,rules:k.value,style:{padding:"10px"}},{default:r(()=>[o(T,null,{default:r(()=>[o(g,{md:12},{default:r(()=>[o(s,{label:"账号",prop:"userName",required:""},{default:r(()=>[o(t,{modelValue:e.formData.userName,"onUpdate:modelValue":a[0]||(a[0]=l=>e.formData.userName=l),placeholder:"请填写",disabled:m.value,"allow-clear":""},null,8,["modelValue","disabled"])]),_:1}),o(s,{label:"昵称",prop:"nickname",required:""},{default:r(()=>[o(t,{modelValue:e.formData.nickname,"onUpdate:modelValue":a[1]||(a[1]=l=>e.formData.nickname=l),placeholder:"请填写","allow-clear":"",autocomplete:"off"},null,8,["modelValue"])]),_:1}),m.value?O("",!0):(f(),D(s,{key:0,label:"密码",prop:"password",rules:[{type:"string",required:!0,message:"密码不能为空"},{type:"string",min:6,max:10,message:"密码长度6-10"}],required:""},{default:r(()=>[o(t,{modelValue:e.formData.password,"onUpdate:modelValue":a[2]||(a[2]=l=>e.formData.password=l),type:"password",placeholder:"请填写",password:"","allow-clear":"",autocomplete:"off"},null,8,["modelValue"])]),_:1})),o(s,{label:"邮箱",prop:"emailAddress"},{default:r(()=>[o(t,{modelValue:e.formData.emailAddress,"onUpdate:modelValue":a[3]||(a[3]=l=>e.formData.emailAddress=l),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),o(s,{prop:"roleIds"},{label:r(()=>[j(" 角色 "),o(B,{content:"不选则解绑该用户原有的角色"},{default:r(()=>[o(v,{type:"layui-icon-about"})]),_:1})]),default:r(()=>[o(S,{modelValue:e.formData.roleIds,"onUpdate:modelValue":a[4]||(a[4]=l=>e.formData.roleIds=l),placeholder:"请选择",multiple:"","allow-clear":"","min-collapsed-num":1,style:{width:"100%"}},{default:r(()=>[(f(!0),L(P,null,W(y.value,l=>(f(),D(C,{key:l.value,value:l.value,label:l.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),o(g,{md:12},{default:r(()=>[o(s,{label:"性别",prop:"gender",required:""},{default:r(()=>[o(i,{modelValue:e.formData.gender,"onUpdate:modelValue":a[5]||(a[5]=l=>e.formData.gender=l),name:"gender",value:1,label:"男"},null,8,["modelValue"]),o(i,{modelValue:e.formData.gender,"onUpdate:modelValue":a[6]||(a[6]=l=>e.formData.gender=l),name:"gender",value:0,label:"女"},null,8,["modelValue"])]),_:1}),o(s,{label:"是否禁用",prop:"isDisable",required:""},{default:r(()=>[o(i,{modelValue:e.formData.isDisable,"onUpdate:modelValue":a[7]||(a[7]=l=>e.formData.isDisable=l),name:"isDisable",value:!0,label:"是"},null,8,["modelValue"]),o(i,{modelValue:e.formData.isDisable,"onUpdate:modelValue":a[8]||(a[8]=l=>e.formData.isDisable=l),name:"isDisable",value:!1,label:"否"},null,8,["modelValue"])]),_:1}),o(s,{label:"手机号码",prop:"phoneMobileNumber",required:""},{default:r(()=>[o(t,{modelValue:e.formData.phoneMobileNumber,"onUpdate:modelValue":a[9]||(a[9]=l=>e.formData.phoneMobileNumber=l),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),o(s,{label:"电话号码",prop:"phoneTeleNumber"},{default:r(()=>[o(t,{modelValue:e.formData.phoneTeleNumber,"onUpdate:modelValue":a[10]||(a[10]=l=>e.formData.phoneTeleNumber=l),placeholder:"请填写","allow-clear":""},null,8,["modelValue"])]),_:1}),o(s,{label:"生日",prop:"birthday"},{default:r(()=>[o(E,{modelValue:e.formData.birthday,"onUpdate:modelValue":a[11]||(a[11]=l=>e.formData.birthday=l),placeholder:"请选择","allow-clear":"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title","btn"])}}});export{me as _};

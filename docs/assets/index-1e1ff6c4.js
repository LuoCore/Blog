/* empty css              */import{d as L,r as m,v as Q,o as N,m as S,w as l,g as e,j as o,f as r,k as J,N as K,t as U,l as D,O as V,P as O,Q as d,R as P,B as W,C as q,I as H,S as X,$ as Y,n as Z,J as ee,K as le,x as te,T as ae,U as ne,V as oe,M as se,h as ue,_ as ie}from"./index-d8cbdd46.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              *//* empty css              */import{G as de,D as me}from"./basic-6ef9ceac.js";import re from"./DialogEditMenuInfo-2413a406.js";import{u as ce}from"./useLoading-886b777a.js";import{u as pe}from"./useConfirm-4b37d2ff.js";/* empty css              *//* empty css              */const _e=[{key:"menuId",title:"菜单Id"},{key:"menuName",title:"菜单名称",customSlot:"menuName"},{key:"menuUrl",title:"路由地址",ellipsisTooltip:!0},{key:"sortId",title:"排序",width:"80px",align:"center"},{key:"menuType",title:"类型",width:"100px",align:"center",customSlot:"menuType"},{key:"isDisable",title:"是否禁用",width:"80px",align:"center",customSlot:"isDisable"},{key:"operator",title:"操作",align:"left",customSlot:"option",fixed:"right",width:"200px"}],fe={class:"table-box"},ye=L({__name:"index",setup(ve){const f=m([]),y=m(),v=m(0),s=Q({menuName:"",menuUrl:"",menuType:0});function z(){s.menuName="",s.menuUrl="",s.menuType=0}const b=m(!1),$=m();async function x(){b.value=!0;try{const a=await de(s);if(!a||!a.isSuccess)return;a.responseData?f.value=a.responseData:f.value=[]}catch(a){console.log(a)}finally{b.value=!1}}function g(a){y.value=void 0,v.value=0,typeof a=="number"?v.value=a:typeof a=="object"&&a&&(y.value=a),h.value=!0}const I=m(!1),w=function(a){I.value=a},h=m(!1);function M(a){pe(d,P("您将删除[0]菜单？",[a.menuName]),n=>{ce(d,"正在删除数据....",async c=>{try{const u=await me(a.menuId);u.isSuccess?d.msg("您已成功删除！",{icon:1}):d.msg("删除失败！"+(u==null?void 0:u.message),{icon:2}),x()}finally{d.close(n),d.close(c)}})},n=>{d.close(n),d.msg("您已取消操作")})}return(a,n)=>{const c=W,u=q,p=H,k=X,B=Y,i=Z,E=ee,F=le,R=te,T=ae,C=ne,j=oe,A=se,G=ue;return N(),S(G,{fluid:"true",class:"menu-box"},{default:l(()=>[e(R,null,{default:l(()=>[e(F,{style:{"margin-top":"10px"}},{default:l(()=>[e(E,null,{default:l(()=>[e(p,{md:5},{default:l(()=>[e(u,{label:"菜单名称","label-width":"80"},{default:l(()=>[e(c,{modelValue:s.menuName,"onUpdate:modelValue":n[0]||(n[0]=t=>s.menuName=t),placeholder:"请输入",size:"sm","allow-clear":!0,style:{width:"98%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{md:5},{default:l(()=>[e(u,{label:"菜单地址","label-width":"80"},{default:l(()=>[e(c,{modelValue:s.menuUrl,"onUpdate:modelValue":n[1]||(n[1]=t=>s.menuUrl=t),placeholder:"请输入",size:"sm","allow-clear":!0,style:{width:"98%"}},null,8,["modelValue"])]),_:1})]),_:1}),e(p,{md:6},{default:l(()=>[e(u,{label:"菜单类型","label-width":"80"},{default:l(()=>[e(B,{modelValue:s.menuType,"onUpdate:modelValue":n[2]||(n[2]=t=>s.menuType=t),placeholder:"请选择"},{default:l(()=>[e(k,{value:0,label:"不限"}),e(k,{value:2,label:"菜单"}),e(k,{value:3,label:"按钮"})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(p,{md:5},{default:l(()=>[e(u,{"label-width":"20"},{default:l(()=>[e(i,{style:{padding:"0px 40px"},type:"normal",size:"md",onClick:x},{default:l(()=>[o(" 查询 ")]),_:1}),e(i,{style:{padding:"0px 40px"},size:"md",onClick:z},{default:l(()=>[o(" 重置 ")]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),r("div",fe,[e(A,{id:"menuId",height:"100%",ref_key:"tableRefMenu",ref:$,loading:b.value,"children-column-name":"childrenMenus",columns:J(_e),"data-source":f.value,"default-toolbar":!0,"default-expand-all":I.value,"expand-index":1},{toolbar:l(()=>[e(i,{size:"sm",onClick:n[3]||(n[3]=t=>g()),type:"normal"},{default:l(()=>[o(" 新建 ")]),_:1}),e(i,{size:"sm",onClick:n[4]||(n[4]=t=>w(!0))},{default:l(()=>[o("展开全部")]),_:1}),e(i,{size:"sm",onClick:n[5]||(n[5]=t=>w(!1))},{default:l(()=>[o("折叠全部")]),_:1})]),name:l(({row:t})=>[e(T,{class:K(t.icon)},null,8,["class"]),o("    "+U(t.name),1)]),option:l(({row:t})=>[e(i,{onClick:_=>g(t.menuId),size:"xs",border:"blue","border-style":"dashed"},{default:l(()=>[o(" 添加子菜单 ")]),_:2},1032,["onClick"]),e(i,{onClick:_=>g(t),size:"xs",border:"green","border-style":"dashed"},{default:l(()=>[o(" 修改 ")]),_:2},1032,["onClick"]),e(i,{onClick:_=>M(t),size:"xs",border:"red","border-style":"dashed"},{default:l(()=>[o(" 删除 ")]),_:2},1032,["onClick"])]),menuType:l(({row:t})=>[D(r("div",null,[e(C,{color:"#165DFF",variant:"light"},{default:l(()=>[o("目录")]),_:1})],512),[[V,t.menuType==0]]),D(r("div",null,[e(C,{color:"#2dc570",variant:"light"},{default:l(()=>[o("菜单")]),_:1})],512),[[V,t.menuType==1]]),D(r("div",null,[e(C,{color:"#F5319D",variant:"light"},{default:l(()=>[o("按钮")]),_:1})],512),[[V,t.menuType==2]])]),isDisable:l(({row:t})=>[e(j,{modelValue:t.isShow,"onUpdate:modelValue":_=>t.isShow=_,"onswitch-text":"是","unswitch-text":"否"},null,8,["modelValue","onUpdate:modelValue"])]),menuName:l(({row:t})=>[r("span",null,[t.menuIcon?(N(),S(T,{key:0,type:t.menuIcon},null,8,["type"])):O("",!0),o(" "+U(t.menuName),1)])]),_:1},8,["loading","columns","data-source","default-expand-all"])]),e(re,{visible:h.value,"onUpdate:visible":n[6]||(n[6]=t=>h.value=t),"form-data":y.value,parentId:v.value,onDone:x},null,8,["visible","form-data","parentId"])]),_:1})}}});const Ue=ie(ye,[["__scopeId","data-v-c62a2d29"]]);export{Ue as default};
